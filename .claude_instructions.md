# Claude Code Instructions for Fathom Project

## Git Workflow (GitHub Flow with Feature Branches)

### **ALWAYS Follow This Process:**

1. **Start New Work**: Always branch from latest master
   ```bash
   git checkout master && git pull origin master
   git checkout -b feature/your-feature-name
   ```

2. **Development Cycle**: Commit frequently, push regularly
   ```bash
   git add . && git commit -m "Descriptive message"
   git push -u origin feature/your-feature-name  # First push
   git push origin feature/your-feature-name     # Subsequent pushes
   ```

3. **Create Pull Request**: When feature is ready
   ```bash
   gh pr create --title "Feature Title" --body "Description"
   ```

4. **Review Process**:
   - Wait for code review and approval
   - Make requested changes by pushing new commits to same branch
   - PR automatically updates with new commits

5. **Merge Strategy**: **ALWAYS use "Squash and merge"** in GitHub PR UI
   - Creates clean, single commit on master
   - Automatically deletes feature branch
   - Maintains linear history

6. **Post-Merge Cleanup**:
   ```bash
   git checkout master && git pull origin master
   git branch -d feature/your-feature-name  # Clean up local branch
   ```

### **Branch Rules:**
- **NEVER commit directly to master** - always use feature branches
- **Branch naming**: `feature/description`, `bugfix/description`, `hotfix/description`
- **All merges via PR only** - no manual git merge commands
- **Require PR review** before merging

### **Commit Guidelines:**
- Use descriptive commit messages following established format
- Include Claude Code footer in all commits
- Check git status before and after major changes

## Project-Specific Notes

### Unity Project
- This is a Unity 2022.3 LTS 2D game project
- Using Universal Render Pipeline (URP)
- Main scene: Assets/Scenes/OceanLayer.unity

### Code Style
- Follow C# conventions for Unity
- Use SerializeField for Inspector-visible private fields
- Comment complex logic

## Always Remember
1. **Follow Git Workflow** - Use feature branches and PR reviews for ALL changes
2. **Squash and merge** - Always use GitHub's "Squash and merge" option
3. **Run lint checks** before committing (when available)
4. **Never force push** or manually merge to master
5. **Use TodoWrite** for tracking multi-step tasks

## Quick Reference Commands
```bash
# Start new feature
git checkout master && git pull origin master && git checkout -b feature/my-feature

# Regular development
git add . && git commit -m "Add feature X" && git push origin feature/my-feature

# Create PR
gh pr create --title "Add feature X" --body "Detailed description"

# After PR merge - cleanup
git checkout master && git pull origin master && git branch -d feature/my-feature
```
